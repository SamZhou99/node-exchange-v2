(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bf6387a"],{"4af0":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"futures"},[s("a-row",{attrs:{type:"flex"}},[s("a-col",{staticClass:"sp bg bg-h t-left",attrs:{flex:"220px"}},[s("a-row",{staticStyle:{height:"630px"}},[s("div",[t._v("USDT")]),s("table",{staticClass:"table-hover"},[s("thead",{staticClass:"list-title"},[s("td",{staticStyle:{width:"60px"}},[t._v("currency")]),s("td",{staticClass:"t-right list-sp",staticStyle:{width:"160px"}},[t._v("latest price")]),s("td",{staticClass:"t-right",staticStyle:{width:"auto"}},[t._v("increase")])]),s("tbody",{staticClass:"list-t"},t._l(this.list,(function(a){return s("tr",{key:a.id,on:{click:function(s){return t.onClickSymbol(a)}}},[s("td",[t._v(t._s(a.symbol))]),s("td",{staticClass:"t-right list-sp"},[t._v(t._s(a.priceUsd))]),s("td",{staticClass:"t-right list-sp",class:a.changePercent24Hr>0?"t-g":"t-r"},[t._v(t._s(a.changePercent24Hr))])])})),0)])]),s("a-row",[s("a-col",{attrs:{flex:"220px"}},[s("div",[t._v("杠杆账户")]),s("p",[t._v("杠杆交易在带来更多利润的同时，也蕴含巨大的风险，当市场出现急剧波动时，您的资产有被清算的风险。")]),this.g.userInfo?s("div",[t._v(" "+t._s(this.g.userInfo.account)+" ")]):s("div",[s("a",[t._v("登录查看资产")])])])],1)],1),s("a-col",{staticClass:"sp bg t-left",attrs:{flex:"auto"}},[s("a-row",{staticStyle:{height:"480px",overflow:"hidden"},attrs:{type:"flex"}},[s("a-col",{attrs:{flex:"auto"}},[s("a-row",{staticClass:"t-left sp-2"},[s("a-col",[s("span",{staticClass:"symbol"},[t._v("BTC/USDT")]),s("span",{staticClass:"price t-g"},[t._v("$"+t._s(t.tick.close))]),s("span",{staticClass:"t-g",staticStyle:{"font-size":"0.25rem",width:"100px"}},[t._v(t._s(t.tick.percent)+"% ")]),s("a-radio-group",{attrs:{"default-value":"1day","button-style":"solid",size:"small"},on:{change:t.onChangeKline},model:{value:t.radio.value,callback:function(a){t.$set(t.radio,"value",a)},expression:"radio.value"}},[s("a-radio-button",{staticClass:"radio-style",attrs:{value:"line"}},[t._v(" Line ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"1min"}},[t._v(" 1m ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"5min"}},[t._v(" 5m ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"15min"}},[t._v(" 15m ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"30min"}},[t._v(" 30m ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"60min"}},[t._v(" 1H ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"4hour"}},[t._v(" 4H ")]),s("a-radio-button",{staticClass:"radio-style",attrs:{value:"1day"}},[t._v(" 1D ")])],1)],1)],1),s("a-row",[s("div",[s("a-spin",{staticClass:"spin-content",attrs:{spinning:t.loading}},[s("div",{staticClass:"k-line-chart",attrs:{id:"custom-theme-k-line"}})])],1)])],1),s("a-col",{attrs:{flex:"300px"}},[s("a-col",{staticClass:"bg bg-h2 t-left"},[s("div",[t._v("Orderbook")]),s("table",{staticClass:"table-hover table-width100"},[s("thead",{staticClass:"list-title"},[s("td",{staticStyle:{width:"60px"}},[t._v("Price (USDT)")]),s("td",{staticClass:"t-right list-sp2",staticStyle:{width:"120px"}},[t._v("Amount (BTC)")]),s("td",{staticClass:"t-right list-sp",staticStyle:{width:"auto"}},[t._v("Sum (BTC)")])]),s("tbody",{staticClass:"list-t"},[t._l(this.orderbook_sell_list,(function(a,i){return s("tr",{key:a.id,staticClass:"pt-sell",style:{"background-size":a.percent+"% 100%"},attrs:{id:"s"+i},on:{click:function(s){return t.onClickOrderbook(a)}}},[s("td",{staticClass:"t-r"},[t._v(t._s(a.price))]),s("td",{staticClass:"t-right list-sp2"},[t._v(t._s(a.amount))]),s("td",{staticClass:"t-right list-sp"},[t._v(t._s(a.sum))])])})),s("tr",[s("td",{staticClass:"orderbook-bd",attrs:{colspan:"3"}},[s("div",{staticClass:"t-g",staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.tick.close)+" "),s("span",{staticClass:"t-gray",staticStyle:{"font-size":"0.75rem"}},[t._v("≈ "+t._s(t.tick.close)+" USD")])])])]),t._l(this.orderbook_buy_list,(function(a,i){return s("tr",{key:a.id,staticClass:"pt-buy",style:{"background-size":a.percent+"% 100%"},attrs:{id:"b"+i},on:{click:function(s){return t.onClickOrderbook(a)}}},[s("td",{staticClass:"t-g",staticStyle:{width:"60px"}},[t._v(t._s(a.price))]),s("td",{staticClass:"t-right list-sp2"},[t._v(t._s(a.amount))]),s("td",{staticClass:"t-right list-sp"},[t._v(t._s(a.sum))])])}))],2)])])],1)],1),s("a-row",[s("div",[s("a-tabs",{staticStyle:{overflow:"hidden"},attrs:{"default-active-key":"1",tabBarStyle:{"border-bottom":"1px solid #091e45"}},on:{change:t.onChangeCallback}},[s("a-tab-pane",{key:"1",attrs:{tab:"Market","force-render":""}},[s("a-row",[s("a-col",{staticStyle:{padding:"10px"},attrs:{span:12}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入价",suffix:"USDT"}}),s("div",{staticStyle:{"padding-top":"15px"}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入量",suffix:"BTC"}})],1),s("a-slider",{attrs:{marks:t.slider.marks,"default-value":25,step:5},on:{change:t.onChangeCallback}}),s("a-row",[s("a-col",{attrs:{span:8}},[t._v(" 交易额 ")]),s("a-col",{staticClass:"t-right",attrs:{span:8,offset:8}},[t._v(" 0.00000000 USDT ")]),s("a-col",[s("a-button",{attrs:{type:"primary",block:""}},[t._v("Buy")])],1)],1)],1),s("a-col",{staticStyle:{padding:"10px"},attrs:{span:12}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入价",suffix:"USDT"}}),s("div",{staticStyle:{"padding-top":"15px"}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入量",suffix:"BTC"}})],1),s("a-slider",{attrs:{marks:t.slider.marks,"default-value":25,step:5},on:{change:t.onChangeCallback}}),s("a-row",[s("a-col",{attrs:{span:8}},[t._v(" 交易额 ")]),s("a-col",{staticClass:"t-right",attrs:{span:8,offset:8}},[t._v(" 0.00000000 USDT ")]),s("a-col",[s("a-button",{attrs:{type:"danger",block:""}},[t._v("Buy")])],1)],1)],1)],1)],1),s("a-tab-pane",{key:"2",attrs:{tab:"Limit"}},[s("a-row",[s("a-col",{staticStyle:{padding:"10px"},attrs:{span:12}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入价",suffix:"USDT"}}),s("div",{staticStyle:{"padding-top":"15px"}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入量",suffix:"BTC"}})],1),s("a-slider",{attrs:{marks:t.slider.marks,"default-value":25,step:5},on:{change:t.onChangeCallback}}),s("a-row",[s("a-col",{attrs:{span:8}},[t._v(" 交易额 ")]),s("a-col",{staticClass:"t-right",attrs:{span:8,offset:8}},[t._v(" 0.00000000 USDT ")]),s("a-col",[s("a-button",{attrs:{type:"primary",block:""}},[t._v("Buy")])],1)],1)],1),s("a-col",{staticStyle:{padding:"10px"},attrs:{span:12}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入价",suffix:"USDT"}}),s("div",{staticStyle:{"padding-top":"15px"}},[s("a-input",{staticClass:"input-pa-l-r",attrs:{prefix:"买入量",suffix:"BTC"}})],1),s("a-slider",{attrs:{marks:t.slider.marks,"default-value":25,step:5},on:{change:t.onChangeCallback}}),s("a-row",[s("a-col",{attrs:{span:8}},[t._v(" 交易额 ")]),s("a-col",{staticClass:"t-right",attrs:{span:8,offset:8}},[t._v(" 0.00000000 USDT ")]),s("a-col",[s("a-button",{attrs:{type:"danger",block:""}},[t._v("Buy")])],1)],1)],1)],1)],1)],1)],1)])],1),s("a-col",{staticClass:"sp bg bg-h t-left",attrs:{flex:"300px"}},[s("div",[t._v("Market Trades")]),s("table",{staticClass:"table-width100"},[s("thead",{staticClass:"list-title"},[s("td",{staticStyle:{width:"60px"}},[t._v("Time")]),s("td",{staticClass:"t-right list-sp3",staticStyle:{width:"130px"}},[t._v("Price (USDT)")]),s("td",{staticClass:"t-right list-sp",staticStyle:{width:"auto"}},[t._v("Amount (BTC)")])]),s("tbody",{staticClass:"list-t"},t._l(this.market_trades_list,(function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.time))]),s("td",{staticClass:"t-right list-sp3",class:"buy"==a.act?"t-g":"t-r"},[t._v(t._s(a.price))]),s("td",{staticClass:"t-right list-sp"},[t._v(t._s(a.amount))])])})),0)])])],1),s("a-row",{staticClass:"sp-2 bg t-left",attrs:{type:"flex"}},[s("a-col",{staticClass:"sp",attrs:{flex:"auto"}},[s("div",[s("div",[s("a-tabs",{staticClass:"tabs-bar",attrs:{"default-active-key":"1",tabBarStyle:{"border-bottom":"1px solid #091e45"}},on:{change:t.onChangeCallback}},[s("a-tab-pane",{key:"1",attrs:{tab:"当前委托"}},[s("table",{staticClass:"table-width100 t-b t-1r"},[s("tr",[s("td",[t._v("时间")]),s("td",[t._v("交易对")]),s("td",[t._v("方式")]),s("td",[t._v("方向")]),s("td",[t._v("价格(USDT)")]),s("td",[t._v("委托量")]),s("td",[t._v("已成交(BTC)")]),s("td",[t._v("成交均价")]),s("td",[t._v("成交额(USDT)")]),s("td",[t._v("状态")]),s("td",[t._v("操作")])]),s("tr",[s("td",{attrs:{colspan:"11"}},[s("a-empty",{attrs:{image:"//assets99.oss-cn-hongkong.aliyuncs.com/images/no-data.png","image-style":{height:"60px"}}})],1)])])]),s("a-tab-pane",{key:"2",attrs:{tab:"委托历史","force-render":""}},[s("table",{staticClass:"table-width100 t-b t-1r"},[s("tr",[s("td",[t._v("时间")]),s("td",[t._v("交易对")]),s("td",[t._v("方式")]),s("td",[t._v("方向")]),s("td",[t._v("价格(USDT)")]),s("td",[t._v("委托量")]),s("td",[t._v("已成交(BTC)")]),s("td",[t._v("成交均价")]),s("td",[t._v("成交额(USDT)")]),s("td",[t._v("状态")]),s("td",[t._v("操作")])]),s("tr",[s("td",{attrs:{colspan:"11"}},[s("a-empty",{attrs:{image:"//assets99.oss-cn-hongkong.aliyuncs.com/images/no-data.png","image-style":{height:"60px"}}})],1)])])])],1)],1)])])],1)],1)},e=[],r=(s("99af"),s("d3b7"),s("159b"),s("a9e3"),s("ac1f"),s("1276"),s("e9c4"),s("c9fd")),o={name:"Futures",components:{},data:function(){return{loading:!1,ws:null,kLineChart:null,klineData:[],symbol:"btcusdt",tick:{open:0,close:0,percent:0},radio:{temp:"",value:"1day"},slider:{marks:{0:"0x",25:"25x",50:"50x",75:"75x",100:"100x"}},menu:{current:["limit"]},list:[],orderbook_buy_list:[],orderbook_sell_list:[],market_trades_list:[]}},destroyed:function(){Object(r["dispose"])("custom-theme-k-line"),null!=this.ws&&(this.ws.close(),this.ws=null)},methods:{onClickOrderbook:function(t){console.log("item",t)},onClickSymbol:function(t){console.log("item",t.symbol,t);var a=t.symbol.toLocaleLowerCase();this.$router.push("/futures?symbol=".concat(a,"usdt")),window.location.reload()},onChangeCallback:function(t){console.log(t)},onChangeKline:function(t){console.log("checked = ".concat(t.target.value));var a=t.target.value;"line"!=a?(this.kLineChart.setStyleOptions({candle:{type:"candle_solid"}}),this.generatedKLineDataList(this.symbol,a)):this.kLineChart.setStyleOptions({candle:{type:"area"}})},generatedKLineDataList:function(t,a,s){var i=this;this.loading=!0;var e=this.g.apiUrl+"/api/kline?symbol=".concat(t,"&period=").concat(a);$.get(e,{},(function(t){var e=[];e=t.data.data.reverse(),e.forEach((function(t){t.timestamp=1e3*t.id,t.volume=t.vol})),i.klineData=e,i.kLineChart.applyNewData(i.klineData),i.loading=!1,s&&s(e);var r=1e3*e[e.length-1].id;switch(a){case"1min":r=moment(r).format("m");break;case"5min":r=moment(r).format("m");break;case"15min":r=moment(r).format("m");break;case"30min":r=moment(r).format("m");break;case"60min":r=moment(r).format("m");break;case"4hour":r=moment(r).format("H");break;case"1day":r=moment(r).format("D");break}i.radio.temp="".concat(a,"-").concat(r)}))},percent:function(t){for(var a=[],s=0,i=0;i<t.length;i++)s=Math.max(s,Number(t[i].sum));for(var e=0;e<t.length;e++){var r=t[e];r.percent=Math.round(r.sum/s*100),a.push(r)}return a},getQueryVariable:function(t){var a=window.location.hash.substring(1);a=a.substring(a.lastIndexOf("?")+1);for(var s=a.split("&"),i=0;i<s.length;i++){var e=s[i].split("=");if(e[0]==t)return e[1]}return!1},initWS:function(){var t=this;this.ws=new WebSocket("".concat(this.g.wsUrl,"/market.btcusdt.ticker")),this.ws.onopen=function(){console.log("websocket init ..."),t.ws.send(JSON.stringify({test:"测试数据"}))},this.ws.onclose=function(){console.log("websocket close ..."),setTimeout((function(){t.initWS()}),1e3)},this.ws.onmessage=function(a){var s=JSON.parse(a.data);if("market.btcusdt.ticker"==s.ch&&s.tick.close){var i=t.klineData[t.klineData.length-1];console.log(t.radio.value,s.ts,moment(s.ts).format("YYYY-MM-DD HH:mm:ss"),moment(1e3*i.id).format("YYYY-MM-DD HH:mm:ss"),t.radio.temp),t.tick=s.tick,t.tick.percent=Math.round((t.tick.close-t.tick.open)/t.tick.close*1e4)/100,i.id=Math.floor(s.ts/1e3),i.close=t.tick.close,t.kLineChart.updateData(i)}}},initList:function(){var t=this,a=this,s=this.g.apiUrl+"/api/caches?key=coincap-coin-list";$.get(s,(function(s){var i=s.data.value;i.forEach((function(t){t.priceUsd=a.g.round(t.priceUsd,1,4),t.changePercent24Hr=a.g.round(t.changePercent24Hr,1,2)})),t.list=i}))},init:function(){var t=this;this.symbol=this.getQueryVariable("symbol"),this.kLineChart=Object(r["init"])("custom-theme-k-line"),this.kLineChart.setStyleOptions(u("dark")),this.kLineChart.createTechnicalIndicator("VOL",!0),this.kLineChart.setStyleOptions(p("")),this.generatedKLineDataList(this.symbol,this.radio.value),this.initList(),this.initWS(),window.addEventListener("resize",(function(){t.kLineChart.resize()}));for(var a=7,s=[],i=0;i<a;i++){var e={price:this.g.round(1e3+1e3*Math.random()),amount:this.g.round(Math.random(),1),sum:this.g.round(Math.random(),1),percent:0};s.push(e)}this.orderbook_sell_list=this.percent(s),s=[];for(var o=0;o<a;o++){var l={price:this.g.round(1e3+1e3*Math.random()),amount:this.g.round(Math.random(),1),sum:this.g.round(Math.random(),1),percent:0};s.push(l)}this.orderbook_buy_list=this.percent(s),s=[];for(var n=0;n<30;n++){var c={time:moment().format("HH:mm:ss"),price:this.g.round(Math.random(),1),amount:this.g.round(Math.random(),1),act:Math.floor(10*Math.random())>5?"buy":"sell"};s.push(c)}this.market_trades_list=s}},mounted:function(){this.init()}},l="#929AA5",n="#202020",c="#333333",d="#373a40";function u(t){var a=l,s=n,i=c,e=c,r=d;return{grid:{horizontal:{color:s},vertical:{color:s}},candle:{priceMark:{high:{color:a},low:{color:a}},tooltip:{text:{color:a}}},technicalIndicator:{tooltip:{text:{color:a}}},xAxis:{axisLine:{color:i},tickLine:{color:i},tickText:{color:a}},yAxis:{axisLine:{color:i},tickLine:{color:i},tickText:{color:a}},separator:{color:i},crosshair:{horizontal:{line:{color:e},text:{backgroundColor:r}},vertical:{line:{color:e},text:{backgroundColor:r}}}}}function p(t){return{candle:{tooltip:{labels:"zh-CN"===t?["时间：","开：","收：","高：","低：","成交量："]:"zh-HK"===t?["時間：","開：","收：","高：","低：","成交量："]:["Time: ","Open: ","Close: ","High: ","Low: ","Volume: "]}}}}var h=o,m=(s("93ac"),s("2877")),v=Object(m["a"])(h,i,e,!1,null,"6a3fae26",null);a["default"]=v.exports},"93ac":function(t,a,s){"use strict";s("ddd1")},ddd1:function(t,a,s){}}]);
//# sourceMappingURL=chunk-0bf6387a.c1a4e79b.js.map